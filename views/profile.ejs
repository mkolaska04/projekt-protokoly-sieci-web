<%- include("partials/navbar.ejs") %>
  <div class="main">
    <div class="profile">
      <h1>Profile of <%= user.username %> 
      </h1>    
      <% if (user.id !== locals.user_id) { %>
      <button class="follow-button"  id="follow-<%=user.id%>" data-user-id="<%= user.id %>">
        <% if (user.followed.some(x => x===locals.user_id)) { %>
          Unfollow
          <% } else { %> 
        Follow
         <% } %>
      </button>
      <% } %>

      <div class="posts">
        <% if (posts && posts.length> 0) { %>
          <% posts.forEach(function(post) { %>
            <%- include("partials/post.ejs", {post: post}) %>
              <% }) %>
                <% } else { %>
                  <p>No posts yet</p>
                  <% } %>
      </div>
    </div>
  </div>

  <script src="/script.js"></script>
  <%- include("partials/footer.ejs") %>